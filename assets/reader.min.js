function parseURL(){return"blog/test.md"}async function fetchAndParseMarkdown(url){const response=await fetch(url);const data=await response.text();return DOMPurify.sanitize(marked(data,{}))}function generateLinkMarkup($headings){const parsedHeadings=$headings.map(heading=>{return{title:heading.innerText,depth:heading.nodeName.replace(/\D/g,""),id:heading.getAttribute("id")}});const $title=`${parsedHeadings[0].title}`;document.title=$title+" - CryptoAlgo Inc.";document.querySelector(".mdc-top-app-bar__title").textContent=$title;document.querySelector(".header .title-holder-l .title-inside h1").textContent=$title;const htmlMarkup=parsedHeadings.map(h=>`\n\t<li class="${h.depth>1?"pl-4":""}">\n\t\t<a href="#${h.id}">${h.title}</a>\n\t</li>\n\t`);return`\n\t\t<ul>${htmlMarkup.join("")}</ul>\n\t`}function updateLinks(visibleId,$links){$links.map(link=>{let href=link.getAttribute("href");link.classList.remove("is-active");if(href===visibleId)link.classList.add("is-active")})}function handleObserver(entries,observer,$links){entries.forEach(entry=>{const{target:target,isIntersecting:isIntersecting,intersectionRatio:intersectionRatio}=entry;if(isIntersecting&&intersectionRatio>=1){const visibleId=`#${target.getAttribute("id")}`;updateLinks(visibleId,$links)}})}function createObserver($links){const options={rootMargin:"0px 0px -70% 0px",threshold:1};const callback=(e,o)=>handleObserver(e,o,$links);return new IntersectionObserver(callback,options)}function handleLinkClick(evt,$headings,motionQuery){evt.preventDefault();let id=evt.target.getAttribute("href").replace("#","");let section=$headings.find(heading=>heading.getAttribute("id")===id);section.setAttribute("tabindex",-1);section.focus();window.scroll({behavior:motionQuery.matches?"instant":"smooth",top:section.offsetTop-20-48})}async function init(){const $url=parseURL();const $main=document.querySelector("#content");const $aside=document.querySelector("#aside");$main.innerHTML=await fetchAndParseMarkdown($url);const $headings=[...$main.querySelectorAll("h1, h2")];$aside.innerHTML=generateLinkMarkup($headings);const $links=[...$aside.querySelectorAll("a")];const observer=createObserver($links);$headings.map(heading=>observer.observe(heading));const motionQuery=window.matchMedia("(prefers-reduced-motion)");$links.map(link=>{link.addEventListener("click",evt=>handleLinkClick(evt,$headings,motionQuery))})}init();let hasReloaded=true;function themeChanged(){setTimeout(function(){hasReloaded=true;if(typeof DISQUS==="object"){DISQUS.reset({reload:true})}},250)}function disqus_config(){this.callbacks.onReady.push(function(){if(!hasReloaded){const div=document.createElement("div");const p=document.createElement("p");p.textContent="Disclaimer: social and share buttons do not work";div.id="disqus_overlay";div.appendChild(p);document.getElementById("disqus_thread").appendChild(div)}})}